<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rogue Trader Generator Tools</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="app">
        <!-- Top Toolbar -->
        <div id="top-toolbar" class="toolbar top-toolbar">
            <button class="toolbar-btn" id="btn-new" title="New Workspace (Ctrl+N)">
                <span class="icon" id="icon-new"></span>
                <span class="toolbar-label">New</span>
            </button>
            <button class="toolbar-btn" id="btn-open" title="Open Workspace (Ctrl+O)">
                <span class="icon" id="icon-open"></span>
                <span class="toolbar-label">Open</span>
            </button>
            <button class="toolbar-btn" id="btn-save" title="Save Workspace (Ctrl+S)">
                <span class="icon" id="icon-save"></span>
                <span class="toolbar-label">Save</span>
            </button>
            <button class="toolbar-btn" id="btn-save-as" title="Save Workspace As (Ctrl+Shift+S)">
                <span class="icon" id="icon-save-as"></span>
                <span class="toolbar-label">Save As</span>
            </button>
            <div class="toolbar-separator"></div>
            <div class="dropdown">
                <button class="toolbar-btn dropdown-toggle" id="btn-print" title="Print">
                    <span class="icon" id="icon-print"></span>
                    <span class="toolbar-label">Print</span>
                    <span class="icon chevron" id="icon-print-chevron"></span>
                </button>
                <div class="dropdown-menu" id="print-menu">
                    <div class="dropdown-section">
                        <div class="dropdown-section-title">Current Node</div>
                        <button class="dropdown-item" data-action="print-current">Print</button>
                    </div>
                    <div class="dropdown-separator"></div>
                    <div class="dropdown-section">
                        <div class="dropdown-section-title">Workspace</div>
                        <button class="dropdown-item" data-action="print-workspace">Print</button>
                    </div>
                </div>
            </div>
            <div class="toolbar-separator"></div>
            <div class="dropdown">
                <button class="toolbar-btn dropdown-toggle" id="btn-export" title="Export">
                    <span class="icon" id="icon-export"></span>
                    <span class="toolbar-label">Export</span>
                    <span class="icon chevron" id="icon-export-chevron"></span>
                </button>
                <div class="dropdown-menu" id="export-menu">
                    <div class="dropdown-section">
                        <div class="dropdown-section-title">Current Node</div>
                        <button class="dropdown-item" data-action="export-rtf">Rich Text Format (RTF)</button>
                        <button class="dropdown-item" data-action="export-pdf">Adobe Reader (PDF)</button>
                        <button class="dropdown-item" data-action="export-json">JSON</button>
                    </div>
                    <div class="dropdown-separator"></div>
                    <div class="dropdown-section">
                        <div class="dropdown-section-title">Workspace</div>
                        <button class="dropdown-item" data-action="export-workspace-rtf">Rich Text Format (RTF)</button>
                        <button class="dropdown-item" data-action="export-workspace-pdf">Adobe Reader (PDF)</button>
                        <button class="dropdown-item" data-action="export-workspace-json">JSON</button>
                    </div>
                </div>
            </div>
            <div class="toolbar-spacer"></div>
            <button class="toolbar-btn" id="btn-settings" title="Settings">
                <span class="icon" id="icon-settings"></span>
                <span class="toolbar-label">Settings</span>
            </button>
            <button class="toolbar-btn" id="btn-about" title="About">
                <span class="icon" id="icon-about"></span>
                <span class="toolbar-label">About</span>
            </button>
        </div>

        <div class="main-container">
            <!-- Left Sidebar - Generation Toolbox -->
            <div id="left-sidebar" class="sidebar left-sidebar">
                <div class="sidebar-header">
                    <h3>Generate</h3>
                </div>
                <div class="sidebar-content">
                    <button class="sidebar-btn" id="btn-gen-system" title="Generate a new star system">
                        <span class="icon" id="icon-gen-system"></span>
                        <span class="sidebar-label">System</span>
                    </button>
                    <button class="sidebar-btn" id="btn-gen-starship" title="Generate a new starship">
                        <span class="icon" id="icon-gen-starship"></span>
                        <span class="sidebar-label">Starship</span>
                    </button>
                    <button class="sidebar-btn" id="btn-gen-primitive" title="Generate a primitive species">
                        <span class="icon" id="icon-gen-primitive"></span>
                        <span class="sidebar-label">Primitive Species</span>
                    </button>
                    <div class="dropdown">
                        <button class="sidebar-btn dropdown-toggle" id="btn-gen-xenos" title="Generate xenos species">
                            <span class="icon" id="icon-gen-xenos"></span>
                            <span class="sidebar-label">Xenos</span>
                            <span class="icon chevron" id="icon-xenos-chevron"></span>
                        </button>
                        <div class="dropdown-menu" id="xenos-menu">
                            <button class="dropdown-item" data-action="generate-xenos" data-world="random">Random World</button>
                            <button class="dropdown-item" data-action="generate-xenos" data-world="temperate">Temperate World</button>
                            <button class="dropdown-item" data-action="generate-xenos" data-world="death">Death World</button>
                            <button class="dropdown-item" data-action="generate-xenos" data-world="desert">Desert World</button>
                            <button class="dropdown-item" data-action="generate-xenos" data-world="ice">Ice World</button>
                            <button class="dropdown-item" data-action="generate-xenos" data-world="jungle">Jungle World</button>
                            <button class="dropdown-item" data-action="generate-xenos" data-world="ocean">Ocean World</button>
                            <button class="dropdown-item" data-action="generate-xenos" data-world="volcanic">Volcanic World</button>
                        </div>
                    </div>
                    <div class="dropdown">
                        <button class="sidebar-btn dropdown-toggle" id="btn-gen-treasure" title="Generate treasure">
                            <span class="icon" id="icon-gen-treasure"></span>
                            <span class="sidebar-label">Treasure</span>
                            <span class="icon chevron" id="icon-treasure-chevron"></span>
                        </button>
                        <div class="dropdown-menu" id="treasure-menu">
                            <button class="dropdown-item" data-action="generate-treasure" data-type="random">Random</button>
                            <button class="dropdown-item" data-action="generate-treasure" data-type="finely-wrought">Finely Wrought</button>
                            <button class="dropdown-item" data-action="generate-treasure" data-type="ancient-miracle">Ancient Miracle</button>
                            <button class="dropdown-item" data-action="generate-treasure" data-type="alien-technology">Alien Technology</button>
                            <button class="dropdown-item" data-action="generate-treasure" data-type="cursed-artefact">Cursed Artefact</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Content Area (Tree + Document Viewer) -->
            <div class="content-area">
                <!-- Left Panel - Tree View -->
                <div class="left-panel">
                <div class="tree-header">
                    <h3 class="tree-title">Content Explorer</h3>
                    <div class="tree-options">
                        <label class="tree-option" title="Display page references from rulebooks in the document viewer">
                            <input type="checkbox" id="page-references">
                            <span>Page refs</span>
                        </label>
                        <label class="tree-option" title="Merge child node content into parent documents">
                            <input type="checkbox" id="collate-nodes">
                            <span>Collate</span>
                        </label>
                    </div>
                </div>
                <div id="tree-container">
                    <ul id="node-tree"></ul>
                </div>
            </div>

            <!-- Splitter -->
            <div class="splitter" id="splitter"></div>

            <!-- Right Panel - Document Viewer -->
            <div class="right-panel">
                <div id="document-viewer">
                    <div class="document-content" id="document-content">
                        <h2>Welcome to Rogue Trader Generator Tools</h2>
                        <p>Select or generate a system from the Generate toolbox to begin.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Dialogs -->
    <div id="modal-overlay" class="modal-overlay hidden">
        <div class="modal">
            <div class="modal-header">
                <h3 id="modal-title">Dialog</h3>
                <button class="modal-close" id="modal-close">&times;</button>
            </div>
            <div class="modal-body" id="modal-body">
                <!-- Dynamic content -->
            </div>
            <div class="modal-footer">
                <button id="modal-ok" class="btn btn-primary">OK</button>
                <button id="modal-cancel" class="btn btn-secondary">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Context Menu -->
    <div id="context-menu" class="context-menu hidden">
        <!-- Dynamic content -->
    </div>

    <!-- Loading Spinner -->
    <div id="loading" class="loading hidden">
        <div class="spinner"></div>
        <p>Generating...</p>
    </div>

    <script src="js/globals.js"></script>
    <script src="js/random.js"></script>
    <script src="js/errorHandler.js"></script>
    <script src="js/ui/icons.js"></script>
    <!-- Data layer (must load before nodes that depend on it) -->
    <script src="js/data/common.js"></script>
    <script src="js/data/xenosBase.js"></script>
    <script src="js/data/xenosKoronusBestiary.js"></script>
    <script src="js/data/xenosPrimitive.js"></script>
    <script src="js/data/xenosStarsOfInequity.js"></script>
    <script src="js/data/starshipTools.js"></script>
    <script src="js/data/environment.js"></script>
    <script src="js/data/organicCompound.js"></script>
    <script src="js/nodes/nodeBase.js"></script>
    <script src="js/nodes/systemNode.js"></script>
    <script src="js/nodes/zoneNode.js"></script>
    <script src="js/nodes/planetNode.js"></script>
    <script src="js/nodes/gasGiantNode.js"></script>
    <script src="js/nodes/asteroidBeltNode.js"></script>
    <script src="js/nodes/asteroidClusterNode.js"></script>
    <script src="js/nodes/asteroidNode.js"></script>
    <script src="js/nodes/derelictStationNode.js"></script>
    <script src="js/nodes/dustCloudNode.js"></script>
    <script src="js/nodes/gravityRiptideNode.js"></script>
    <script src="js/nodes/lesserMoonNode.js"></script>
    <script src="js/nodes/nativeSpeciesNode.js"></script>
    <script src="js/nodes/orbitalFeaturesNode.js"></script>
    <script src="js/nodes/pirateShipsNode.js"></script>
    <script src="js/nodes/radiationBurstsNode.js"></script>
    <script src="js/nodes/shipNode.js"></script>
    <script src="js/nodes/solarFlaresNode.js"></script>
    <script src="js/nodes/starshipGraveyardNode.js"></script>
    <script src="js/nodes/treasureNode.js"></script>
    
    <script src="js/nodes/xenosNode.js"></script>
    <script src="js/nodes/primitiveXenosNode.js"></script>
    <script src="js/nodes/createNode.js"></script>
    <script src="js/ui/treeView.js"></script>
    <script src="js/ui/documentViewer.js"></script>
    <script src="js/ui/modals.js"></script>
    <script src="js/ui/contextMenu.js"></script>
    <script src="js/ui/toolbar.js"></script>
    <script src="js/workspace.js"></script>
    <script src="js/app.js"></script>
</body>
</html>